library(dtplyr)
knitr::opts_chunk$set(echo = TRUE)
```{r ,echo=FALSE,warning=FALSE,message=F}
options('scipen'=100,'digits'=2)
knitr::opts_chunk$set(comment="",prompt=F,strip.white=F,
warning=FALSE,message=F,echo=T,
fig.align='center',fig.height=3.5)
library(dplyr)
library(dygraphs)
library(ggplot2)
library(ggmap)
library(ggmap)
fig.align='center',fig.height=3.5)
library(dplyr)
library(dygraphs)
library(ggplot2)
library(data.table)
library(data.table)
library(devtools)
library(data.table)
library(devtools)
library(plotly)
library(xtable)
library(devtools)
library(plotly)
library(xtable)
library(rCharts)
library(tidyr)
library(DT)
library(RColorBrewer)
library(dplyr)
names(iris)
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width))
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width)) +
geom_point()
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width)) +
geom_point() + geom_line()
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width)) +
geom_point() + geom_line() + geom_abline()
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width)) +
geom_point() +
geom_curve()
ggplot(iris,aes(x = Sepal.Length , y = Sepal.Width)) +
geom_point() +
geom_smooth()
data <- read.csv("/Volumes/SD-Lofu/PIXNET_DS_Workshop_EDA_Alger/data/transaction.csv") #如果你是mac
View(data)
head(data,5) %>%
ktable()
head(data,5) %>%
kable()
head(data[,1:6],5) %>%
knitr::kable()
View(data)
head(data[,sample(1:15)],5) %>%
knitr::kable()
head(data[,sample(1:15,6)],5) %>%
knitr::kable()
temp = filter(data,city == "臺北市")
temp
temp = group_by(temp,district)
summarise(temp, amount=n()) -> table # dplyr::n 用來計數
table = summarise(temp, amount=n())  # dplyr::n 用來計數
table
ggplot(table,aes(x=district,y=amount)) +
geom_bar(stat = "identity") + thm() # stat='identity'以表格的值做為bar的高度
thm <- function() theme(text=element_text(size = 15, family = "STHeiti")) # 控制字體與大小
head(table,5)
temp = mutate(temp,rate = round(amount/sum(amount),3) ) -> table
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(city,use_type)
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,use_type)
temp = summarise(temp,amount = n())
temp = mutate(temp,rate = round(amount/sum(amount),3) ) -> table
table
View(table)
View(data)
View(data)
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = ggroup_by(temp,city,build_type)
temp = group_by(temp,city,build_type)
temp = summarise(temp,amount = n()) # 計算個群的數量
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,build_type)
temp = summarise(temp,mean_unit_price = mean(price_unit) ) # 計算個群的數量
temp
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,build_type)
temp = summarise(temp,mean_unit_price = mean(price_unit)) # 計算個群的數量
temp
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,build_type)
temp = summarise(temp,mean_unit_price = mean(price_unit)) # 計算個群的數量
temp %>% View
View(data)
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,age)
temp = summarise(temp,mean_age = mean(age)) # 計算個群的數量
temp
temp %>% View()
```{r}
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,build_type)
temp = summarise(temp,mean_age = mean(age)) # 計算個群的數量
temp %>% View()
temp
head(temp)
head(temp[c(1:4,13:16)],)
head(temp[c(1:4,13:16),],)
head(temp[c(1:4,13:18),],)
head(temp[c(1:4,13:16),],8)
ggplot(temp,aes(x = city, y = mean_age, fill = build_type))+
geom_bar(stat = 'identity', position = 'dodge')  + # dodge類別並排
thm() + scale_fill_discrete(name  ="使用分區或編定")  # 設定圖例的顯示
temp = group_by(data,trac_month)
temp = summarise(temp,amount=n()) -> table
table
ggplot(table,aes(x=trac_month,y=amount,group=1)) +
geom_line() + thm() + labs(x = "交易月份" , y = "交易數量")
class(table$trac_month)
ggplot(table,aes(x=trac_month,y=amount,group=1)) +
geom_line() + thm() + labs(x = "交易月份" , y = "交易數量")
temp = group_by(data,city,trac_month)
table = summarise(temp,amount=n())
table
ggplot(table,aes(x=trac_month,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() +
labs(x = "交易月份" , y = "交易數量")
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,age)
table = summarise(temp,amount = n()) # 計算個群的數量
head(table[c(1:3,13:15),],8) # 挑出高雄與台北的前三樣看看樣貌
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
head(table[c(1:3,13:15),],8)
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
ggplot(data,aes(x=age, y =..count..)) +
geom_histogram()
ggplot(data ,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)")
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 2000000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 1500000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 1000000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 7500000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 750000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 600000)) # 設定y軸上下界線
ggplot(data,aes(x=city,y=price_unit)) +
geom_boxplot() + thm() +
labs(x = "縣市" , y = "每平方公尺價格(元)") +
coord_cartesian(ylim = c(0, 400000)) # 設定y軸上下界線
ggplot(data,aes(x=build_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "縣市" , y = "log(每平方公尺價格(元))")
ggplot(data,aes(x=build_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "city" , y = "age")
View(data)
ggplot(data,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "city" , y = "age")
tabel = filter(data,city == "臺北市" | city == "高雄市" )
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
)
tabel = filter(data,city == "臺北市")
View(data)
tabel = filter(data,city == "臺北市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
tabel = filter(data,city == "臺北市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
View(data)
View(table)
tabel = filter(data,city == "臺北市")
View(table)
table = filter(data,city == "臺北市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
table = filter(data,city == "高雄市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
table = filter(data,city == "高雄市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
View(data)
ggplot(data,aes(x=age, y=price_unit, color=city)) +
geom_point(shape=1, size=2) # shape控制圖示；size控制點的大小
ggplot(data,aes(x=age, y=price_unit)) +
geom_point() # shape控制圖示；size控制點的大小
table = filter(data,city == "高雄市")
ggplot(table,aes(x=age, y=price_unit)) +
geom_point() # shape控制圖示；size控制點的大小
View(data)
library(plotly)
library(plotly)
ggplotly(a)
ggplot(iris,aes(Petal.Width, Sepal.Length, colour=Species)) +
geom_point() -> a
a
ggplotly(a)
detach("package:plotly", unload=TRUE)
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
ggplotly(a)
remove.packages("plotly")
devtools::install_github("ropensci/plotly")
library(plotly)
library(plotly)
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
remove.packages("plotly")
.libPaths()
install.packages("plotly")
library(plotly)
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
detach("package:plotly", unload=TRUE)
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
library(plotly)
.libPaths()
remove.packages("plotly")
devtools::install_github("ropensci/plotly")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
detach("package:plotly", unload=TRUE)
remove.packages("plotly")
.libPaths()
install.packages("plotly")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
install.packages("DBI")
install.packages("DBI")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
detach("package:plotly", unload=TRUE)
remove.packages("plotly")
devtools::install_github("ropensci/plotly")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
library("DBI", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
remove.packages("DBI")
install.packages("DBI")
library("DBI", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
detach("package:DBI", unload=TRUE)
library("DBI", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
library("plotly", lib.loc="/Library/Frameworks/R.framework/Versions/3.3/Resources/library")
ggplot(iris,aes(Petal.Width, Sepal.Length, colour=Species)) +
geom_point() -> a
a
ggplotly(a)
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,age)
table = summarise(temp,amount = n())
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
View(data)
View(data)
temp = filter(data,city == "文山區")
temp = filter(data,city == "大安區")
temp = filter(data,district == "大安區")
temp = filter(data,district == "文山區")
temp
library(ggthemr)
ggthemr('flat')
table = filter(data,city == "高雄市")
ggplot(table,aes(x=use_type,y=age)) +
geom_boxplot() + thm() + # geom_boxplot(outlier.shape = NA) outlier不顯示
labs(x = "use_type" , y = "age")
ggthemr('flat')
temp = filter(data,city == "臺北市" | city == "高雄市" )
temp = group_by(temp,city,age)
table = summarise(temp,amount = n())
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
ggplot(table,aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
ggplot(temp,aes(x=age, y=area_land)) + geom_point()
ggplot(temp,aes(x=age, y=area_land)) + geom_point(outlier.shape = NA)
ggplot(temp,aes(x=age, y=area_land)) + geom_point()
ggplot(temp,aes(x=age, y=area_land)) + geom_point() + ylim(0,25000)
ggplot(temp,aes(x=age, y=area_land)) + geom_point() + ylim(0,15000)
ggplot(temp,aes(x=age, y=area_land)) + geom_point()
names(iris)
iris$Species
levels(iris$Species)
levels(iris$Species)[2]
levels(iris$Species)[3]
levels(iris$Species)[2:3]
ggplot(iris,aes(x=Sepal.Width, y=Petal.Width,
color=levels(iris$Species)[2:3], shape = levels(iris$Species)[2:3], size = levels(iris$Species)[2:3])) + geom_point()
ggplot(iris,aes(x=Sepal.Width, y=Petal.Width, color=levels(iris$Species)[2:3])) + geom_point()
ggplot(iris,aes(x=Sepal.Width, y=Petal.Width)) + geom_point()
ggplot(iris,aes(x=Sepal.Width, y=Petal.Width,color=Species)) + geom_point()
table = data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,age) %>%
summarise(amount = n()) %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
library(tidyr)
table %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
table = data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,age) %>%
summarise(amount = n()) %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
table %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
table %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
table = data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,age) %>%
summarise(amount = n()) %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,age) %>%
summarise(amount = n()) %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm()
data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,age) %>%
summarise(amount = n()) %>%
ggplot(aes(x=age,y=amount,group=city,color=city)) +
geom_line() + geom_point() + thm() + coord_cartesian(xlim = c(-3, 10))
table = data %>%
filter(city == "臺北市" | city == "高雄市" ) %>%
group_by(city,use_type) %>%
summarise(amount = n()) %>%
mutate(rate = round(amount/sum(amount),2) )
6*12
6*6
6*14
6*16
table = data %>%
filter(city == "臺北市") %>%
group_by(district) %>%
summarise(amount=n())  # dplyr::n 用來計數
swirl()
12/5
View(data)
data %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
View(data)
View(data)
data %>%
filter(district == "文山區" & build == "套房") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
data %>%
filter(district == "文山區" & build_type == "套房") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
View(data)
data %>%
filter(district == "文山區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
View(data)
data %>%
filter(district == "士林區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
data %>%
filter(district == "信義區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point()
data %>%
filter(district == "信義區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point(jitter = TRUE)
data %>%
filter(district == "信義區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point(position = "jitter")
data %>%
filter(district == "信義區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point(position = "jitter")
data %>%
filter(district == "信義區" & build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit)) + geom_point(position = "jitter")
data %>%
filter(district == "文山區" | district == "士林區")
data %>%
filter(district == "文山區" | district == "士林區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter")
data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter")
data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter") +
thm()
data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point() +
thm()
data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter") +
thm()
data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter") +
thm() %>%
ggplotly()
ans = data %>%
filter(district == "文山區" | district == "士林區" |district == "信義區") %>%
filter(build_type == "套房(1房1廳1衛)") %>%
ggplot(aes(x=age, y=price_unit,color = district)) + geom_point(position = "jitter") +
thm()
ans
ans
ggplotly(ans)
